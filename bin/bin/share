#!/usr/bin/env zsh

req_url='https://x0.at/'

if [ -z "$1" ]; then
    file=/dev/stdin
elif [ ! -f "$1" ]; then
    echo "File $1 does not exist"
    exit 1
else
    file="$1"
fi
echo "file: $file"
curl -F "file=@\"$file\"" $req_url | read -r url
echo -n "$url" | xsel -ib
notify-send -a "share" "File uploaded" "$url"
