#!/usr/bin/env zsh

req_url='https://x0.at/'

clip=$(xsel -ob)

if [ -f "$clip" ]; then
    echo "Detected path to an existing file; uploading the file's contents instead"
    share "$clip"
    exit
fi

url=$(curl -F "file=@-" $req_url <<< $clip) # file=@-;filename=clip.txt
xsel -ib <<< $url
notify-send -a "share" "Clipboard uploaded" "$url"
