## window & usage
keep-open=yes
# no-border
autofit-larger=1920
force-window-position=yes
volume=90
screenshot-directory=/data/Images/Screenshots/mpv
screenshot-template="%F_%wH-%wM-%wS.%wT_%n"
screenshot-format=png
screenshot-png-compression=9

# Use window by default.
# Use the "terminal" or "audio" profiles to disable these.
player-operation-mode=pseudo-gui
force-window=immediate
osd-playing-msg=playing: ${media-title} ${!window-scale==1.000:(scale: ${window-scale})}

# we have progressbar.lua
no-osc


## OSD stuff
osd-duration=1500
term-osd-bar
osd-font-size=40
# ${time-pos} does't respect 'osd-fractions' setting
#osd-msg3=${osd-sym-cc} ${time-pos} ${?duration:/ ${duration} (${percent-pos}%)} ${!volume==100:\n Vol: ${volume}%} ${!speed!=1:\n Speed: ${speed}} ${!window-scale==1:\n Scale: ${window-scale}}
#term-status-msg=+${volume}


## video options
profile=gpu-hq
vo=gpu
# gpu-api=vulkan

# shaders
# static luma noise: ~~/shaders/noise_static_luma.hook https://pastebin.com/yacMe6EZ
# nnedi3 pre-scaling: /usr/share/mpv-prescalers/nnedi3-nns32-win8x4.hook https://github.com/bjin/mpv-prescalers
# ravu pre-scaling: /usr/share/mpv-prescalers/ravu-r3.hook https://github.com/bjin/mpv-prescalers
# KrigBilateral chroma: ~~/shaders/KrigBilateral.glsl https://gist.github.com/igv/a015fc885d5c22e6891820ad89555637
glsl-shader="~~/shaders/noise_static_luma.hook"
#glsl-shader="~~/shaders/nnedi3-nns32-win8x4.hook"
#glsl-shader="/usr/share/mpv-prescalers/compute/ravu-r3.hook"
#glsl-shader="~~/shaders/KrigBilateral.glsl"

# resizing
scale=ewa_lanczos
# alternative dscale: mitchell
dscale=ewa_lanczos
cscale=sinc
cscale-window=blackman
cscale-radius=3

# interpolation-related settings, cycle with 'z-i'
interpolation=yes
video-sync=display-resample
blend-subtitles=yes
# sharper<==>blurry and smoother
# oversample, triangle, mitchell
# tscale=oversample
tscale=box
tscale-window=sphinx
#lower (e.g. 0.95) = sharper; higher (e.g. 1.05) = smoother
tscale-radius=1.0
tscale-clamp=0.0

# debanding (cycle with 'z-d')
deband=yes
deband-iterations=3
deband-threshold=50
deband-range=16
deband-grain=10


## subtitles
sub-font=Fontin Sans Rg
sub-bold=yes
sub-font-size=47
sub-border-size=2.5
sub-pos=98
sub-blur=0.2
sub-gray=yes
sub-fix-timing=yes
sub-ass-force-margins=yes
# cycle with `u`
# sub-ass-override=yes
# this doesn't seem to do anything
# sub-ass-force-style=FontName=Fontin Sans Rg,bold=0,fontsize=172,marginv=80,marginr=300,marginl=300,borderStyle=1,outline=4.0,shadow=0,primarycolour=&H00FFFFFF,outlinecolour=&H00000000,playresx=1920,playresy=1080
demuxer-mkv-subtitle-preroll=index


## cache
# cache=yes
# cache-default=120000
# cache-backbuffer=100000
# cache-seek-min=5000


## ytdl
# support playlist urls from email digests by fetching playlists by default
ytdl-raw-options=yes-playlist=,force-ipv4=
ytdl-format=bestvideo[height<=?1440]+bestaudio/bestvideo+bestaudio/best
# If this is not specified, some videos inside youtube playlists don't load.
# I do not know which and why.
load-unsafe-playlists=yes


## misc
input-ipc-server=/tmp/mpv-socket
write-filename-in-watch-later-config

# language-based track selection
slang=de,deu,ger,en,eng
alang=ja,jp,jpn,deu,ger,en,eng,de


[extension.gif]
loop-file=inf


[audio]
# we don't want no video
ytdl-format=bestaudio
vid=no
no-audio-display
osd-playing-msg=
force-window=no
profile=terminal


[terminal]
player-operation-mode=cplayer
term-osd-bar
msg-module
msg-color

[bench]
# https://haasn.xyz/posts/2017-10-05-how-to-benchmark-mpvs-raw-throughput.html
audio=no
untimed=yes
video-sync=display-desync
vulkan-swap-mode=immediate
opengl-swapinterval=0
# d3d11-sync-interval=0
osd-msg1="FPS: ${estimated-display-fps}"

[protocol.http]
cache=yes
# numbers are in kB
cache-default=300000
cache-backbuffer=200000
# prefer english subtitles for youtube etc.
slang=en,eng,de,deu,ger


[protocol.https]
profile=protocol.http

[protocol.rtmp]
profile=protocol.http

[twitch]
# twitch streams and vods have issues with interpolation
profile-desc=cond:p.path:find("twitch.tv")~=nil
interpolation=no
deband=no
